<template>
  <style>
    .text-rotate {
      -webkit-writing-mode: tb-rl;
      -ms-writing-mode: tb-rl;
      -moz-writing-mode: tb-rl;
      -o-writing-mode: tb-rl;
      writing-mode: tb-rl;
      -webkit-transform: rotate(-180deg);
      -ms-transform: rotate(-180deg);
      -moz-transform: rotate(-180deg);
      -o-transform: rotate(-180deg);
      transform: rotate(-180deg);
    }

    .text-right {
      text-align: right;
    }

    .text-bold {
      font-weight: 600 !important;
    }

    .hide {
      display: none;
    }
  </style>

  <au-input-form title="Budget Cashflow Unit">
    <au-autocomplete
      value.bind="unit"
      error.bind="error.unit"
      label="Unit"
      loader.bind="unitLoader"
      text="Name"
      placeholder="Cari Unit"
      options.bind="controlOptions"
    >
    </au-autocomplete>
    <au-datepicker
      label="Periode"
      value.bind="dueDate"
      error.bind="error.dueDate"
      options.bind="controlOptions"
    >
    </au-datepicker>

    <div class="form-group">
      <div class="col-sm-6"></div>
      <div class="col-sm-3">
        <button click.delegate="search()" class="btn btn-success">Cari</button>
        <button click.delegate="reset()" class="btn btn-success">Reset</button>
      </div>
    </div>
    <div class="btn-group pull-left">
      <a click.delegate="printXls()" class="btn btn-primary">Cetak Excel</a>
      <a click.delegate="printPdf()" class="btn btn-info">Cetak Pdf</a>
    </div>

    <br />

    <table if.bind="!isEmpty" class="table table-hover table-bordered">
      <thead>
        <tr>
          <th colspan="5">KETERANGAN</th>
          <th>MATA UANG</th>
          <th>NOMINAL VALAS</th>
          <th>NOMINAL IDR</th>
          <th>ACTUAL IDR</th>
        </tr>
      </thead>
      <tbody>
        <tr repeat.for="item of items">
          <td
            if.bind="item.useSection && item.sectionId === 1"
            rowspan="${rowspan.oa}"
          >
            <span class="text-rotate text-bold">OPERATING ACTIVITIES</span>
          </td>
          <td
            if.bind="item.useSection && item.sectionId === 2"
            rowspan="${rowspan.ia}"
          >
            <span class="text-rotate text-bold">INVESTING ACTIVITIES</span>
          </td>
          <td
            if.bind="item.useSection && item.sectionId === 3"
            rowspan="${rowspan.fa}"
          >
            <span class="text-rotate text-bold">FINANCING ACTIVITIES</span>
          </td>
          <td
            if.bind="item.useGroup && item.groupId === 1"
            rowspan="${rowspan.oaci}"
          >
            <span class="text-rotate text-bold">CASH IN</span>
          </td>
          <td
            if.bind="item.useGroup && item.groupId === 2"
            rowspan="${rowspan.oaco}"
          >
            <span class="text-rotate text-bold">CASH OUT</span>
          </td>
          <td
            if.bind="item.useGroup && item.groupId === 4"
            rowspan="${rowspan.iaci}"
          >
            <span class="text-rotate text-bold">CASH IN</span>
          </td>
          <td
            if.bind="item.useGroup && item.groupId === 5"
            rowspan="${rowspan.iaco}"
          >
            <span class="text-rotate text-bold">CASH OUT</span>
          </td>
          <td
            if.bind="item.useGroup && item.groupId === 7"
            rowspan="${rowspan.faci}"
          >
            <span class="text-rotate text-bold">CASH IN</span>
          </td>
          <td
            if.bind="item.useGroup && item.groupId === 8"
            rowspan="${rowspan.faco}"
          >
            <span class="text-rotate text-bold">CASH OUT</span>
          </td>
          <td if.bind="item.level === 2"></td>
          <td
            colspan="${item.level === 0 ? 4 : item.level === 1 && item.readOnly ? 3 : item.level === 1 && !item.readOnly ? 2 : item.level === 2 && item.readOnly ? 2 : 1}"
            class="${item.level === 2 ? '' : 'text-bold'}"
          >
            ${item.label}
          </td>
          <td if.bind="!item.readOnly" style="width: 1px">
            <button class="btn btn-primary" click.delegate="addItem($event)">
              +
            </button>
          </td>
          <td if.bind="item.labelOnly" colspan="4"></td>
          <td if.bind="!item.labelOnly" class="text-center">
            <au-textbox value.bind="data.Currency.Code" read-only.bind="true">
            </au-textbox>
          </td>
          <td if.bind="!item.labelOnly">
            <au-numeric
              value.bind="data.BestCaseCurrencyNominal"
              format="0,000.00"
              read-only.bind="true"
            >
            </au-numeric>
          </td>
          <td if.bind="!item.labelOnly">
            <au-numeric
              value.bind="data.BestCaseNominal"
              format="0,000.00"
              read-only.bind="true"
            >
            </au-numeric>
          </td>
          <td if.bind="!item.labelOnly">
            <au-numeric
              value.bind="data.BestCaseActualNominal"
              format="0,000.00"
              read-only.bind="true"
            >
            </au-numeric>
          </td>
        </tr>
      </tbody>
    </table>
  </au-input-form>
</template>

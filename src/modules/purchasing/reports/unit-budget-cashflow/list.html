<template>
  <style>
    .text-rotate {
      -webkit-writing-mode: tb-rl;
      -ms-writing-mode: tb-rl;
      -moz-writing-mode: tb-rl;
      -o-writing-mode: tb-rl;
      writing-mode: tb-rl;
      -webkit-transform: rotate(-180deg);
      -ms-transform: rotate(-180deg);
      -moz-transform: rotate(-180deg);
      -o-transform: rotate(-180deg);
      transform: rotate(-180deg);
    }

    .text-right {
      text-align: right;
    }

    .text-bold {
      font-weight: 600 !important;
    }

    .hide {
      display: none;
    }

    .buttons-container {
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>

  <au-input-form title="Budget Cashflow Unit">
    <au-autocomplete
      value.bind="unit"
      error.bind="error.unit"
      label="Unit"
      loader.bind="unitLoader"
      text="Name"
      placeholder="Cari Unit"
      options.bind="controlOptions"
    >
    </au-autocomplete>
    <au-datepicker
      label="Periode"
      value.bind="date"
      error.bind="error.date"
      options.bind="controlOptions"
    >
    </au-datepicker>

    <div class="form-group">
      <div class="col-sm-6"></div>
      <div class="col-sm-3">
        <button click.delegate="search()" class="btn btn-success">Cari</button>
        <button click.delegate="reset()" class="btn btn-success">Reset</button>
      </div>
    </div>
    <div class="btn-group pull-left">
      <a click.delegate="printXls()" class="btn btn-primary">Cetak Excel</a>
      <a click.delegate="printPdf()" class="btn btn-info">Cetak Pdf</a>
    </div>

    <br />

    <table if.bind="!isEmpty" class="table table-hover table-bordered">
      <thead>
        <tr>
          <!-- <th colspan="5">KETERANGAN</th> -->
          <th colspan="4">KETERANGAN</th>
          <th>MATA UANG</th>
          <th>NOMINAL VALAS</th>
          <th>NOMINAL IDR</th>
          <th>ACTUAL IDR</th>
        </tr>
      </thead>
      <tbody>
        <tr repeat.for="item of items">
          <td
            if.bind="item.IsUseSection"
            rowspan="${item.CashflowTypeRowspan || 1}"
          >
            <span class="text-rotate text-bold">${item.CashflowTypeName}</span>
          </td>
          <td if.bind="item.IsUseGroup" rowspan="${item.GroupRowspan || 1}">
            <span class="text-rotate text-bold">${item.TypeName}</span>
          </td>
          <!-- <td if.bind="item.level === 2"></td>
          <td
            colspan="${item.level === 0 ? 4 : item.level === 1 && item.IsReadOnly ? 3 : item.level === 1 && !item.IsReadOnly ? 2 : item.level === 2 && item.IsReadOnly ? 2 : 1}"
            class="${item.level === 2 ? '' : 'text-bold'}"
          >
            ${item.CashflowCategoryName}
          </td> -->
          <!-- <td></td> -->
          <td colspan="${!item.IsReadOnly ? 1 : 2}">
            ${item.CashflowCategoryName}
          </td>
          <td if.bind="!item.IsReadOnly">
            <div class="buttons-container">
              <button
                class="btn btn-primary"
                click.delegate="addItem(item)"
                style="margin-right: 5px"
              >
                +
              </button>
              <button
                class="btn btn-primary"
                click.delegate="updateItem($event)"
              >
                Edit
              </button>
            </div>
          </td>
          <td if.bind="item.IsLabelOnly" colspan="4"></td>
          <td if.bind="!item.IsLabelOnly" class="text-center">
            <au-textbox
              value.bind="item.Currency ? item.Currency.Code : '-'"
              read-only.bind="true"
            >
            </au-textbox>
          </td>
          <td if.bind="!item.IsLabelOnly">
            <au-numeric
              value.bind="item.CurrencyNominal"
              format="0,000.00"
              read-only.bind="true"
            >
            </au-numeric>
          </td>
          <td if.bind="!item.IsLabelOnly">
            <au-numeric
              value.bind="item.Nominal"
              format="0,000.00"
              read-only.bind="true"
            >
            </au-numeric>
          </td>
          <td if.bind="!item.IsLabelOnly">
            <au-numeric
              value.bind="item.Total"
              format="0,000.00"
              read-only.bind="true"
            >
            </au-numeric>
          </td>
        </tr>
      </tbody>
    </table>
  </au-input-form>
</template>

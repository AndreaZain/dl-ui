<template>
  <au-input-form title.bind="title" with.bind="context">

    <div slot="actions" class="btn-group">
      <button class="btn btn-default" click.delegate="context.cancel($event)" if.one-way="context.hasCancel">Kembali</button>
      <button class="btn btn-primary" click.delegate="context.edit($event)" if.one-way="context.hasEdit">Ubah</button>
      <button class="btn btn-success" click.delegate="context.save($event)" if.one-way="context.hasSave">Simpan</button>
      <button class="btn btn-danger" click.delegate="context.delete($event)" if.one-way="context.hasDelete">Hapus</button>
    </div>
    
    <au-textbox
      label="No. DO" 
      value.bind="data.Code"
      error.bind="error.Code"
      if.bind="readOnly || isEdit"
      read-only.bind="true"
      options.bind="controlOptions">
    </au-textbox>
    
    <au-datepicker
      label="Tanggal"
      value.bind="data.Date"
      error.bind="error.Date"
      read-only.bind="readOnly"
      options.bind="controlOptions">
    </au-datepicker>

    <au-autocomplete
      value.bind="selectedStorage"
      label="Gudang"
      read-only.bind="readOnly"
      error.bind="error.Storage"
      loader.bind="storageLoader"
      key="name"
      text="name"
      keypress.delegate="enterDelegate($event)"
      options.bind="controlOptions">
    </au-autocomplete>
  
    <au-autocomplete
      value.bind="selectedProductionOrder"
      label="Nomor SPP"
      read-only.bind="readOnly || isEdit"
      error.bind="error.ProductionOrder"
      loader.bind="productionOrderLoader"
      key="OrderNo"
      text.bind="productionOrderTextFormatter"
      keypress.delegate="enterDelegate($event)"
      options.bind="controlOptions">
    </au-autocomplete>

    <au-textbox
      label="Material"
      value.bind="data.Material"
      read-only.bind="true"
      options.bind="controlOptions">
    </au-textbox>

    <au-textbox
      label="Lebar"
      value.bind="data.MaterialWidthFinish"
      error.bind="error.MaterialWidthFinish"
      read-only.bind="true"
      keypress.delegate="enterDelegate($event)"
      change.delegate="widthChanged($event)"
      options.bind="controlOptions">
    </au-textbox>

    <au-autocomplete
      value.bind="selectedBuyer"
      label="Buyer"
      read-only.bind="true"
      error.bind="error.Buyer"
      loader.bind="buyersLoader"
      key="Name"
      text="Name"
      keypress.delegate="enterDelegate($event)"
      options.bind="controlOptions">
    </au-autocomplete>

    <au-autocomplete
      value.bind="selectedMaterialConstructionFinish"
      label="Konstruksi"
      read-only.bind="readOnly || isEdit"
      error.bind="error.MaterialConstructionFinish"
      loader.bind="materialConstructionFinishLoader"
      key="Name"
      text="Name"
      keypress.delegate="enterDelegate($event)"
      options.bind="controlOptions">
    </au-autocomplete>


    <au-dropdown
      label="Satuan"
      value.bind="data.PackingUom"
      items.bind="packingUomOptions"
      error.bind="error.PackingUom"
      read-only.bind="readOnly"
      options.bind="controlOptions">
    </au-dropdown>

    <au-textbox show.bind="error.DOSalesDetail" error.bind="error.DOSalesDetail" read-only.bind="true"></au-textbox>

    <au-collection
      columns.bind="doSalesDetailsInfo.columns"
      items.bind="data.DOSalesDetails"
      errors.one-way="error.DOSalesDetails"
      add.bind="doSalesDetailsInfo.onAdd"
      remove.bind="doSalesDetailsInfo.onRemove"
      read-only.bind="readOnly"
      item-template="modules/production/finishing-printing/do-sales/template/do-sales-item"
      view-model.ref="DOSalesDetailsCollection">
    </au-collection>
    
  </au-input-form>

</template>